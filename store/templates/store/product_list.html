<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MyShop â€” Catalog</title>
    <style>
      body {font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            max-width: 1000px; margin: 2rem auto; padding: 0 1rem;}
      .grid {display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px;}
      .card {border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px;}
      .muted {color: #6b7280;}
      .price {font-weight: 700;}
    </style>
  </head>
  <body>
    <h1>Catalog</h1>
    <div class="grid">
      {% for p in products %}
        <div class="card">
            {% if p.image %}
                <a href="{% url 'product_detail' slug=p.slug %}">
                <img src="{{ p.image.url }}" alt="{{ p.name }}" 
                    style="width:100%; height:160px; object-fit:cover; border-radius:8px; margin-bottom:8px;">
                </a>
            {% endif %}

        <div class="muted">{{ p.category.name }}</div>
  
        <h3>
            <a href="{% url 'product_detail' slug=p.slug %}">
            {{ p.name }}
            </a>
        </h3>
  
        <p>{{ p.description|default:"(No description yet)" }}</p>
        <div class="price">${{ p.price|floatformat:2 }}</div>
    </div>

      {% empty %}
        <p>No products available yet. Add one in <a href="/admin/">Admin</a>.</p>
      {% endfor %}
    </div>
  </body>
</html>
